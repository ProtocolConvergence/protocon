
\input{preamble}
\usepackage{verbatim}

\begin{document}
\title{Search Algorithm}
\author{Alex Klinkhamer}
\maketitle

\section{Depth-First Search (Backtracking)}

$\mathsc{SynSearch}(p_{dl})$:
\begin{enumerate}
 \item Let $p_{dl}$ be the initial non-stabilizing protocol with deadlock states.
 \item Create a list $G$ of potential actions.
 \item Prune all actions which break closure.
 \item Prune all actions which cause self-loops.
 \item Call $p_{ss} \defeq \mathsc{SynSearchBT}(p_{dl}, G)$.
 \item Return $p_{ss}$ (could be $\mathsc{Nil}$ if no solution found).
\end{enumerate}

$\mathsc{SynSearchBT}(p_{dl}, G)$:
\begin{enumerate}
 \item For each remaining action $g\in G$,
  \begin{enumerate}
   \item Add the action $g$ to $p_{dl}$.
   \item If a livelock is created, remove $g$ from $G$.
   \item If all deadlocks are resolved, Return $p_{dl}$.
   \item Note how many deadlocks the action resolves.
   \item Remove the action $g$ from $p_{dl}$.
  \end{enumerate}
 \item Order actions in $G$ by number of resolved deadlocks.
 \item If remaining actions do not add weak convergence, Return $\mathsc{Nil}$.
 \item For each remaining action $g\in G$,
  \begin{enumerate}
   \item Remove $g$ from $G$.
   \item Add the action $g$ to $p_{dl}$.
   \item Call $p_{ss} \defeq \mathsc{SynSearchBT}(p_{dl}, G)$.
   \item If $p_{ss}\neq \mathsc{Nil}$, Return $p_{ss}$.
   \item Remove the action $g$ from $p_{dl}$.
   \item If there exist deadlock states in $p_{dl}$ which can only be resolved by a single action,
    \begin{enumerate}
     \item Add all required actions (and remove them from $G$).
     \item Call $p_{ss} \defeq \mathsc{SynSearchBT}(p_{dl}, G)$.
     \item Return $p_{ss}$ (could be $\mathsc{Nil}$ if no solution found).
    \end{enumerate}
  \end{enumerate}
\end{enumerate}

\section{Future}
\begin{enumerate}
 \item Allow for weak fairness.
 \item At each level, choose the smallest set of actions of which one must occur to resolve some deadlock state.
 %\item If any illegitimate state is locally checkable, one of the local state variables must be changed, at least to something not locally-checkable.
 % This is like the outermost ring of the "best ranking" algorithm.
\end{enumerate}

\end{document}

